!function(){var o,c;function r(r,i){var a=encodeURIComponent(r);c.fadeOut(),o.fadeOut(),fetch("/"+a).then(function(t){return t.text()}).then(function(t){var e=(new DOMParser).parseFromString(t,"text/html"),n=$(e.querySelector(".definition-block").outerHTML);n.hide(),i||window.history.pushState({term:r},r+" | Urban Sinatra","/"+a),c.get(0)?c.replaceWith(n):o.replaceWith(n),u(),n.fadeIn()})}function t(){return c.find("#current-term").text().trim()}function u(){var n;o=$(".main-search"),c=$(".definition-block"),o.get(0)&&((n=o).on("submit",function(t){t.preventDefault();var e=n.find("#term-input").val().trim();e&&r(e)}),document.title="Urban Sinatra"),c.get(0)&&(c.on("click","a",function(t){t.preventDefault(),r($(this).text())}),document.title=t()+" | Urban Sinatra")}window.onpopstate=function(t){t.state?t.state.term?r(t.state.term,!0):t.state.mainPage&&(c.fadeOut(),o.fadeOut(),fetch("/").then(function(t){return t.text()}).then(function(t){var e=new DOMParser,n=e.parseFromString(t,"text/html"),r=$(n.querySelector(".main-search").outerHTML);r.hide(),c.get(0)?c.replaceWith(r):o.replaceWith(r),u(),r.fadeIn()})):window.location.reload()},$(function(){u(),o.get(0)?window.history.replaceState({mainPage:!0},document.title):window.history.replaceState({term:t()},document.title)})}();